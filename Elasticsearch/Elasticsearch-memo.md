# Elasticserachメモ
## 概要
- オープンソースの全文検索エンジン。  
→※全文検索エンジンとは、複数の文書やデータにまたがって、特定の文字列をキーに、目的のものを探す方式。  
→種類として「逐次検索」「索引検索」がある。  
→Elasticsearchは、「索引検索」にあたる。

## 特徴
### 分散配置による高速化と高可用性の実現
- Elasticserachでは、インデックスを作成すると、内部で「シャード」と呼ばれる単位に分割して、格納
- 複数のノード（接続装置）を配置させて分散することにより、インデックスの検索処理が向上する。
- ノードを追加した際の、シャードの再構成はすべて自動的に行ってくれる。
- シャードに対して、「レプリカ」と呼ばれる複製を持たせることができ、ノードダウン時の自動復旧が可能。
### シンプルなREST APIのアクセス
- インデックスの作成や検索はもちろん、クラスタの管理・メンテナンスも含めて、すべての操作をREST API経由で行うことができる。
- REST APIのURLを見るだけで、どのようなリソースにどのような操作を行っているかがクリアになる。
- 
### JSONフォーマットに対応した柔軟性の高いドキュメント指向データベース
- インデックスやクエリの対象となるドキュメントを、すべてJSONフォーマットで表す。
- 格納するドキュメント(レコード)は事前にスキーマを定義しなくても、データの格納が可能。
- 格納するデータの値を見て、Elasticserachが自動的にデータの型を推論する。
### ログ収集・可視化などの多様な関連ソフトウェアとの連携
- 単体使用でも優れているが、関連するソフトウェアと組み合わせることで、幅広い用途に適用。
- 下記の関連ソフトウェア（※Elasticserach Stack）の連携高機能なログ分析システムの構築の容易化。
    - Kibana・・・可視化
    - Logstash・・・ログ収集
    - Beats・・・メトリクスデータ収集

## 導入事例
- 日本経済新聞社
- NAVER
- GitHub
- Netflix
- CERN

## 基本用語と概念
### ドキュメント
- 格納する1つの文章の単位。  
※RDBで言えば、レコードに該当。  
※相違点は、ドキュメントはすべてJSONオブジェクトである。

- 中身は1つ以上のフィールド（※後述）で構成。  
→下記、例。

```json
{
    "host" : "192.222.2.2.2.2",
    "ident" : "-",
    "user" : "-",
    "date" : "2016-09-10T12:30:01",
    "request" : "GET http://~~~~~~~.com/index.html HTTP/1.1",
    "status" : "200",
    "bytes" : "1850"
}
```

### フィールド
- ドキュメント内の項目名の組をフィールドと呼ぶ。  
※上記の例では、`"date" : "2016-09-10T12:30:01"`の部分が1つのフィールドに該当。
- ドキュメントは、1つ以上のフィールドから構成。
- Elasticserachにおける転置インデックスは、フィールドごとに作成・管理。
- クエリ実行の際には、フィールド単位で実行。
- サポートしているデータ型に関しては、下記。

